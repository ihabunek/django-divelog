{% extends "divelog/base.html" %}

{% load i18n %}
{% load divelog_filters %}

{% block title %}Dives{% endblock %}

{% block css %}
<link href="{{ STATIC_URL }}vendor/datatables/css/datatables.css" rel="stylesheet" />
{% endblock %}

{% block js %}
{% if dives|length > 0 %}
<script src="{{ STATIC_URL }}vendor/datatables/js/jquery.dataTables.min.js "></script>
<script>
$(document).ready(function() {
    $('#dives-table').dataTable({
   		"iDisplayLength": 25,
   		
   		// Styles which make use of twitter bootstrap
   		"sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
   		"sWrapper": "dataTables_wrapper form-inline",
   		
   		// Initially sort descending by datetime
   		"aaSorting": [[ 2, "desc" ]], 
    });
});
</script>
{% endif %}
{% endblock %}

{% block content %}
{% include "divelog/messages.html" %}
{% if dives|length > 0 %}

{{ highlight }}

<table id="dives-table" class="table table-striped table-condensed table-bordered">
	<thead>
		<th>ID</th>
		<th>Fingerprint</th>
		<th>Date</th>
		<th class="right">Max. depth</th>
		<th class="right">Duration</th>
		<th>Actions</th>
	</thead>
	<tbody>
	{% for dive in dives %}
		<tr>
			<td>{{ dive.id }}</td>
			<td>{{ dive.fingerprint }}</td>
			<td>{{ dive.date_time|date:"Y-m-d H:i:s" }}</td>
			<td class="right">{{ dive.max_depth|floatformat:2 }} m</td>
			<td class="right">{{ dive.duration|formatTime }}</td>
			<td>
				<a href="{% url divelog.views.dive_view dive.id %}">View</a>
				<a href="{% url divelog.views.dive_edit dive.id %}">Edit</a>
				<a href="{% url divelog.views.dive_trash dive.id %}">Trash</a>
			</td>
		</tr>
	{% endfor %}
	</tbody>
</table>
{% else %}
<p>You currently have no dives.</p>
<ul>
  <li><a href="{% url divelog.views.dive_add %}">Add a dive</a></li>
  <li><a href="{% url divelog.views.upload_list %}">Upload divelog</a></li>
</ul>
{% endif %}
{% endblock %}
